"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[482],{2482:(A,d,s)=>{s.r(d),s.d(d,{CategoriesModule:()=>v});var l=s(9808),r=s(2382),o=s(1725),c=s(1728),h=s(5093),g=s(7600),p=s(8089),e=s(4893),C=s(7978);function b(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr",25),e.NdJ("click",function(a){return e.CHM(t),e.oxw().SelectRow(a)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()}if(2&n){const t=i.$implicit,u=i.index,a=e.oxw();e.Q6J("cTableActive",a.selectedRow==u),e.uIk("index",u),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name)}}const f=function(n){return["/categories",n]};function _(n,i){if(1&n&&(e.TgZ(0,"li",26)(1,"a",27),e._uU(2),e.qZA()()),2&n){const t=i.$implicit,u=e.oxw();e.Q6J("disabled",-1==t)("active",t==u.page),e.xp6(1),e.Q6J("routerLink",e.VKq(4,f,t)),e.xp6(1),e.Oqu(-1==t?"...":t)}}function T(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().ToggleModal(1)}),e._uU(1," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 "),e.qZA()}}const Z=[{path:":page",component:(()=>{class n{constructor(t,u,a){this.categoryService=t,this.route=u,this.iconSet=a,this.tableData=[],this.modalVisible=[!1,!1],this.options={buttonspadding:3,elements:18},this.newCategory={name:""},this.selectedRow=-1,this.page=1,this.maxpage=1,this.buttons=[],a.icons=Object.assign({},p.z)}ngOnInit(){this.InitData()}InitData(){this.route.params.subscribe(t=>{var u;this.page=null!==(u=parseInt(t.page))&&void 0!==u?u:1,this.page<1&&(this.page=1),this.LoadPage()})}LoadPage(){this.categoryService.getAll(this.page,this.options.elements).subscribe(t=>{this.maxpage=Math.ceil(t.count/this.options.elements),this.tableData=t.rows,0==this.tableData.length&&this.page>1?(this.page=this.maxpage,this.LoadPage()):(this.selectedRow=-1,this.GeneratePageButtons())})}GeneratePageButtons(){this.buttons=[],this.buttons.push(1),this.page-(1+this.options.buttonspadding)>1&&this.buttons.push(-1);for(let t=Math.max(this.page-this.options.buttonspadding,2);t<=Math.min(this.page+this.options.buttonspadding,this.maxpage);t++)this.buttons.push(t);this.page+(1+this.options.buttonspadding)<this.maxpage&&this.buttons.push(-1),this.page+this.options.buttonspadding<this.maxpage&&this.buttons.push(this.maxpage)}SelectRow(t){this.selectedRow=t.target.parentElement.attributes.index.value}CreateCategory(){this.categoryService.create({name:this.newCategory.name}).subscribe({next:u=>{this.LoadPage(),this.ToggleModal(0),this.newCategory.name=""},error:u=>{console.log(u.error)}})}ChangeName(){this.categoryService.update(Number(this.tableData[this.selectedRow].id),this.newCategory.name).subscribe({next:t=>{this.LoadPage(),this.ToggleModal(1),this.newCategory.name=""},error:t=>{console.log(t.error)}})}ToggleModal(t){1==t&&(this.newCategory.name=this.tableData[this.selectedRow].name),this.modalVisible[t]=!this.modalVisible[t]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.HE),e.Y36(g.gz),e.Y36(c.uk))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e._Bn([c.uk])],decls:57,vars:10,consts:[[1,"mb-4","mh-100"],["xs","9",1,"fs-5"],["xs","3"],["cButton","","color","light",1,"float-end",3,"click"],["cIcon","","name","cilReload"],["align","middle","cTable","",1,"mb-0","border",3,"hover","responsive","small"],["scope","col"],["scope","col",2,"width","90%"],[3,"cTableActive","click",4,"ngFor","ngForOf"],["sm","auto"],["size","sm"],["cPageItem","",3,"disabled","active",4,"ngFor","ngForOf"],[1,"d-none","d-md-block"],["cButton","","class","me-3 float-end","color","light",3,"click",4,"ngIf"],["alignment","center",3,"visible"],["cModalTitle",""],["cButtonClose","",3,"click"],["cForm","","ngNativeValidate","",3,"ngSubmit"],[1,"mb-3"],["cLabel","col","cCol","","xs","2","for","newCategoryName"],["cFormControl","","id","newCategoryName","type","text","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","name","newCategory.name","required","",3,"ngModel","ngModelChange"],[1,"mx-1"],["cButton","","color","light","type","submit"],["cLabel","col","cCol","","xs","2","for","categoryName"],["cFormControl","","id","categoryName","type","text","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","name","newCategory.name","required","",3,"ngModel","ngModelChange"],[3,"cTableActive","click"],["cPageItem","",3,"disabled","active"],["cPageLink","",3,"routerLink"],["cButton","","color","light",1,"me-3","float-end",3,"click"]],template:function(t,u){1&t&&(e.TgZ(0,"c-card",0)(1,"c-card-header")(2,"c-row")(3,"c-col",1),e._uU(4," \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 "),e.qZA(),e.TgZ(5,"c-col",2)(6,"button",3),e.NdJ("click",function(){return u.LoadPage()}),e.O4$(),e._UZ(7,"svg",4),e.qZA()()()(),e.kcU(),e.TgZ(8,"c-card-body")(9,"table",5)(10,"thead")(11,"tr")(12,"th",6),e._uU(13,"\u0418\u0414 \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),e.qZA(),e.TgZ(14,"th",7),e._uU(15,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,b,5,4,"tr",8),e.qZA()()(),e.TgZ(18,"c-card-footer")(19,"c-row")(20,"c-col",9)(21,"c-pagination",10),e.YNc(22,_,3,6,"li",11),e.qZA()(),e.TgZ(23,"c-col",12)(24,"button",3),e.NdJ("click",function(){return u.ToggleModal(0)}),e._uU(25," \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e "),e.qZA(),e.YNc(26,T,2,0,"button",13),e.qZA()()()(),e.TgZ(27,"c-modal",14)(28,"c-modal-header")(29,"h5",15),e._uU(30,"\u041d\u043e\u0432\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),e.qZA(),e.TgZ(31,"button",16),e.NdJ("click",function(){return u.ToggleModal(0)}),e.qZA()(),e.TgZ(32,"c-modal-body")(33,"form",17),e.NdJ("ngSubmit",function(){return u.CreateCategory()}),e.TgZ(34,"c-row",18)(35,"label",19),e._uU(36,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),e.qZA(),e.TgZ(37,"c-col")(38,"input",20),e.NdJ("ngModelChange",function(m){return u.newCategory.name=m}),e.qZA()()(),e.TgZ(39,"c-row",21)(40,"button",22),e._uU(41,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),e.qZA()()()()(),e.TgZ(42,"c-modal",14)(43,"c-modal-header")(44,"h5",15),e._uU(45,"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),e.qZA(),e.TgZ(46,"button",16),e.NdJ("click",function(){return u.ToggleModal(1)}),e.qZA()(),e.TgZ(47,"c-modal-body")(48,"form",17),e.NdJ("ngSubmit",function(){return u.ChangeName()}),e.TgZ(49,"c-row",18)(50,"label",23),e._uU(51,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),e.qZA(),e.TgZ(52,"c-col")(53,"input",24),e.NdJ("ngModelChange",function(m){return u.newCategory.name=m}),e.qZA()()(),e.TgZ(54,"c-row",21)(55,"button",22),e._uU(56,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),e.qZA()()()()()),2&t&&(e.xp6(9),e.Q6J("hover",!0)("responsive",!0)("small",!0),e.xp6(8),e.Q6J("ngForOf",u.tableData),e.xp6(5),e.Q6J("ngForOf",u.buttons),e.xp6(4),e.Q6J("ngIf",-1!=u.selectedRow),e.xp6(1),e.Q6J("visible",u.modalVisible[0]),e.xp6(11),e.Q6J("ngModel",u.newCategory.name),e.xp6(4),e.Q6J("visible",u.modalVisible[1]),e.xp6(11),e.Q6J("ngModel",u.newCategory.name))},directives:[o.AkF,o.nkx,o.iok,o.Yp0,o.Hq3,c.ar,o.yue,o.auY,l.sg,o.ZQn,o.xUh,o.QtL,o.Qmh,g.yS,o.YHm,l.O5,o.zS7,o.Rbl,o.vPP,o.PFQ,o.KF4,r.JL,r.F,o.$_X,o.eFW,o.sOC,o.oHf,r.Fj,r.Q7,r.JJ,r.On],encapsulation:2}),n})(),data:{title:$localize`Категории`}},{path:"",redirectTo:"1",pathMatch:"full"}];let y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(Z)],g.Bz]}),n})(),v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[y,o.dTQ,o.dGk,c.QX,o.P4_,l.ez,o.zE6,o.qek,r.UX,o.hJ1,o.ejP,o.hJ1,o.ga2,h.N,o.FxY,o.U$I,o.u3b,l.ez,r.u5,o.zkK]]}),n})()}}]);