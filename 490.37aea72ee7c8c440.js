"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[490],{8490:(P,g,r)=>{r.r(g),r.d(g,{TicketModule:()=>H});var a=r(9808),l=r(2382),n=r(1725),d=r(1728),p=r(5093),_=r(7600),k=r(4987),T=r(4872),t=r(4893),m=r(7978);function h(u,c){1&u&&t._UZ(0,"div")}function C(u,c){if(1&u&&(t.TgZ(0,"c-col",34)(1,"c-card",35)(2,"c-card-body")(3,"h6",36),t._uU(4),t.qZA(),t.TgZ(5,"p",37),t._uU(6),t.qZA(),t.TgZ(7,"p",37)(8,"small"),t._uU(9),t.ALo(10,"date"),t.qZA()()()()(),t._UZ(11,"c-col",38)),2&u){const e=t.oxw().$implicit;t.xp6(4),t.AsE("",null==e.user?null:e.user.secondName," ",null==e.user?null:e.user.firstName,""),t.xp6(2),t.hij(" ",e.text," "),t.xp6(3),t.Oqu(t.xi3(10,4,e.createdAt,"dd.MM.YYYY HH:mm"))}}function f(u,c){if(1&u&&(t._UZ(0,"c-col",38),t.TgZ(1,"c-col",34)(2,"c-card",39)(3,"c-card-body")(4,"h6",36),t._uU(5),t.qZA(),t.TgZ(6,"p",37),t._uU(7),t.qZA(),t.TgZ(8,"p",37)(9,"small"),t._uU(10),t.ALo(11,"date"),t.qZA()()()()()),2&u){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("color","dark")("textColor","white"),t.xp6(3),t.AsE("",null==e.user?null:e.user.secondName," ",null==e.user?null:e.user.firstName,""),t.xp6(2),t.hij(" ",e.text," "),t.xp6(3),t.Oqu(t.xi3(11,6,e.createdAt,"dd.MM.YYYY HH:mm"))}}function b(u,c){if(1&u&&(t.TgZ(0,"c-row",2),t.YNc(1,h,1,0,"div",31),t.YNc(2,C,12,7,"ng-template",null,32,t.W1O),t.YNc(4,f,12,9,"ng-template",null,33,t.W1O),t.qZA()),2&u){const e=c.$implicit,o=t.MAs(3),i=t.MAs(5),s=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userId==s.ticket.applicantId)("ngIfThen",o)("ngIfElse",i)}}function Z(u,c){if(1&u){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().ToggleModal(2)}),t._uU(1," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 "),t.qZA()}}function x(u,c){if(1&u){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).ToggleModal(0)}),t._uU(1," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u044f\u0432\u043a\u0438 "),t.qZA()}}function A(u,c){if(1&u){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).ToggleModal(1)}),t._uU(1," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e "),t.qZA()}}function M(u,c){if(1&u){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).ToggleModal(3)}),t._uU(1," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f "),t.qZA()}}function w(u,c){if(1&u&&(t.TgZ(0,"span"),t.YNc(1,x,2,0,"button",15),t.YNc(2,A,2,0,"button",15),t.YNc(3,M,2,0,"button",15),t.qZA()),2&u){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",4!=e.ticket.states[0].state&&3!=e.ticket.states[0].state),t.xp6(1),t.Q6J("ngIf",4!=e.ticket.states[0].state&&3!=e.ticket.states[0].state),t.xp6(1),t.Q6J("ngIf",4!=e.ticket.states[0].state&&3!=e.ticket.states[0].state)}}function J(u,c){if(1&u){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).ConfirmModal(3)}),t._uU(1," \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 "),t.qZA()}}function F(u,c){if(1&u){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).ConfirmModal(4)}),t._uU(1," \u0412\u0437\u044f\u0442\u044c \u0432 \u0440\u0430\u0431\u043e\u0442\u0443 "),t.qZA()}}function v(u,c){if(1&u&&(t.TgZ(0,"span"),t.YNc(1,J,2,0,"button",15),t.YNc(2,F,2,0,"button",15),t.qZA()),2&u){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",1==e.ticket.states[0].state&&e.ticket.workerId==e.user.userId),t.xp6(1),t.Q6J("ngIf",1==e.ticket.states[0].state&&e.ticket.workerId!=e.user.userId)}}function N(u,c){if(1&u){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).ConfirmModal(0)}),t._uU(1," \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 "),t.qZA()}}function q(u,c){if(1&u){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).ConfirmModal(1)}),t._uU(1," \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 "),t.qZA()}}function I(u,c){if(1&u){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).ConfirmModal(2)}),t._uU(1," \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 "),t.qZA()}}function E(u,c){if(1&u&&(t.TgZ(0,"span"),t.YNc(1,N,2,0,"button",15),t.YNc(2,q,2,0,"button",15),t.YNc(3,I,2,0,"button",15),t.qZA()),2&u){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",1==e.ticket.states[0].state||2==e.ticket.states[0].state),t.xp6(1),t.Q6J("ngIf",2==e.ticket.states[0].state),t.xp6(1),t.Q6J("ngIf",2==e.ticket.states[0].state)}}function U(u,c){if(1&u){const e=t.EpF();t.TgZ(0,"c-modal",19)(1,"c-modal-header")(2,"h5",20),t._uU(3,"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0437\u0430\u044f\u0432\u043a\u0438"),t.qZA(),t.TgZ(4,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().ToggleModal(0)}),t.qZA()(),t.TgZ(5,"c-modal-body")(6,"form",22),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().ChangeState()}),t.TgZ(7,"c-row")(8,"label",41),t._uU(9,"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u044f\u0432\u043a\u0438"),t.qZA(),t.TgZ(10,"c-col")(11,"select",42),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().selected.state=i}),t.TgZ(12,"option",43),t._uU(13,"\u0417\u0430\u043a\u0440\u044b\u0442\u0430"),t.qZA(),t.TgZ(14,"option",44),t._uU(15,"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"),t.qZA(),t.TgZ(16,"option",45),t._uU(17,"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u043e\u0442\u0432\u0435\u0442\u0430"),t.qZA()()()(),t.TgZ(18,"c-row",26)(19,"button",27),t._uU(20,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),t.qZA()()()()()}if(2&u){const e=t.oxw();t.Q6J("visible",e.modal[0]),t.xp6(11),t.Q6J("ngModel",e.selected.state)}}function y(u,c){if(1&u&&(t.TgZ(0,"option",49),t._uU(1),t.qZA()),2&u){const e=c.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function S(u,c){if(1&u){const e=t.EpF();t.TgZ(0,"c-modal",19)(1,"c-modal-header")(2,"h5",20),t._uU(3,"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0437\u0430\u044f\u0432\u043a\u0438"),t.qZA(),t.TgZ(4,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().ToggleModal(1)}),t.qZA()(),t.TgZ(5,"c-modal-body")(6,"form",22),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().ChangeCategory()}),t.TgZ(7,"c-row")(8,"label",46),t._uU(9,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),t.qZA(),t.TgZ(10,"c-col")(11,"select",47),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().selected.category=i}),t.YNc(12,y,2,2,"option",48),t.qZA()()(),t.TgZ(13,"c-row",26)(14,"button",27),t._uU(15,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),t.qZA()()()()()}if(2&u){const e=t.oxw();t.Q6J("visible",e.modal[1]),t.xp6(11),t.Q6J("ngModel",e.selected.category),t.xp6(1),t.Q6J("ngForOf",e.categoryOptions)}}function Q(u,c){if(1&u&&(t.TgZ(0,"option",49),t._uU(1),t.qZA()),2&u){const e=c.$implicit;t.Q6J("value",e.id),t.xp6(1),t.AsE("",e.secondName," ",e.firstName," ")}}function Y(u,c){if(1&u){const e=t.EpF();t.TgZ(0,"c-modal",19)(1,"c-modal-header")(2,"h5",20),t._uU(3,"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"),t.qZA(),t.TgZ(4,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().ToggleModal(3)}),t.qZA()(),t.TgZ(5,"c-modal-body")(6,"form",22),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().ChangeWorker()}),t.TgZ(7,"c-row")(8,"label",50),t._uU(9,"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c"),t.qZA(),t.TgZ(10,"c-col")(11,"select",51),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().selected.worker=i}),t._UZ(12,"option",49),t.YNc(13,Q,2,3,"option",48),t.qZA()()(),t.TgZ(14,"c-row",26)(15,"button",27),t._uU(16,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),t.qZA()()()()()}if(2&u){const e=t.oxw();t.Q6J("visible",e.modal[3]),t.xp6(11),t.Q6J("ngModel",e.selected.worker),t.xp6(1),t.Q6J("value",null),t.xp6(1),t.Q6J("ngForOf",e.workerOptions)}}const D=[{path:":id",component:(()=>{class u{constructor(e,o,i,s,O,L){this.route=e,this.router=o,this.userService=i,this.ticketService=s,this.categoryService=O,this.tokenStorageService=L,this.ticketId=-1,this.modal=[!1,!1,!1,!1],this.ticket={id:1,theme:"",categoryId:0,applicantId:0,workerId:0,states:[{state:k.CY.INWORK,createdAt:""}],messages:[]},this.ticketStates=["\u0417\u0430\u043a\u0440\u044b\u0442\u0430","\u0412 \u0440\u0430\u0431\u043e\u0442\u0435","\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u043e\u0442\u0432\u0435\u0442\u0430","\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430","\u041e\u0442\u043c\u0435\u043d\u0435\u043d\u0430"],this.categoryOptions=[],this.workerOptions=[],this.user={role:-1,userId:-1},this.selected={state:this.ticket.states[0].state,category:this.ticket.categoryId,worker:this.ticket.workerId},this.newMessageContent="",this.confirm={name:"",method:()=>{}},this.confirmArr=[{name:"\u041e\u0442\u043c\u0435\u043d\u0430 \u0437\u0430\u044f\u0432\u043a\u0438",method:()=>this.CancelTicket()},{name:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0437\u0430\u044f\u0432\u043a\u0438",method:()=>this.ConfirmTicket()},{name:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u044f\u0432\u043a\u0438",method:()=>this.RejectTicket()},{name:"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u044f\u0432\u043a\u0438 \u043d\u0430 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435",method:()=>this.CompleteTicket()},{name:"\u041f\u0440\u0438\u043d\u044f\u0442\u0438\u0435 \u0432 \u0440\u0430\u0431\u043e\u0442\u0443",method:()=>this.TakeInWork()}]}ngOnInit(){let e=this.tokenStorageService.getUser();this.user.role=e.role,this.user.userId=e.userId,1==this.user.role&&(this.userService.getByRole(T.u.TECHSUPPORT).subscribe(o=>{this.workerOptions=o}),this.categoryService.getCategories().subscribe(o=>{this.categoryOptions=o})),this.route.params.subscribe(o=>{this.ticketId=o.id,-1==this.ticketId&&this.router.navigate(["/tickets",1]),this.LoadTicket()})}AddMessage(){this.ticketService.createMessage(this.ticketId,{text:this.newMessageContent}).subscribe({next:e=>{this.ticket=e,this.ToggleModal(2)},error:e=>{console.log(e.error)}})}CancelTicket(){this.ticketService.cancel(this.ticketId).subscribe({next:e=>{this.ticket=e,this.ToggleModal(4),this.confirm={name:"",method:()=>{}}},error:e=>{console.log(e.error)}})}RejectTicket(){this.ticketService.reject(this.ticketId).subscribe({next:e=>{this.ticket=e,this.ToggleModal(4),this.confirm={name:"",method:()=>{}}},error:e=>{console.log(e.error)}})}ConfirmTicket(){this.ticketService.confirm(this.ticketId).subscribe({next:e=>{this.ticket=e,this.ToggleModal(4),this.confirm={name:"",method:()=>{}}},error:e=>{console.log(e.error)}})}CompleteTicket(){this.ticketService.complete(this.ticketId).subscribe({next:e=>{this.ticket=e,this.ToggleModal(4),this.confirm={name:"",method:()=>{}}},error:e=>{console.log(e.error)}})}TakeInWork(){this.ticketService.assign(this.ticketId,this.user.userId).subscribe({next:e=>{this.ticket=e,this.ToggleModal(4),this.confirm={name:"",method:()=>{}}},error:e=>{console.log(e.error)}})}ChangeState(){this.ticketService.changeState(this.ticketId,Number(this.selected.state)).subscribe({next:e=>{this.ticket=e,this.ToggleModal(0)},error:e=>{console.log(e.error)}})}ChangeCategory(){this.ticketService.changeCategory(this.ticketId,Number(this.selected.category)).subscribe({next:e=>{this.ticket=e,this.ToggleModal(1)},error:e=>{console.log(e.error)}})}ChangeWorker(){this.ticketService.assign(this.ticketId,Number(this.selected.worker)).subscribe({next:e=>{this.ticket=e,this.ToggleModal(3)},error:e=>{console.log(e.error)}})}LoadTicket(){this.ticketService.getOne(this.ticketId).subscribe(e=>{this.ticket=e})}GetStateName(){return this.ticketStates[this.ticket.states[0].state]}ToggleModal(e){this.modal[e]=!this.modal[e]}ConfirmModal(e){this.confirm=this.confirmArr[e],this.modal[4]=!this.modal[4]}}return u.\u0275fac=function(e){return new(e||u)(t.Y36(_.gz),t.Y36(_.F0),t.Y36(m.KD),t.Y36(m.wP),t.Y36(m.HE),t.Y36(m.id))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-ticket"]],decls:74,vars:18,consts:[[1,"mb-4"],["cForm",""],[1,"mb-3"],["cLabel","col","cCol","","xs","2","for","theme"],["cFormControl","","id","theme","readonly","",3,"value"],["cLabel","col","cCol","","xs","2","for","category"],["cFormControl","","id","category","readonly","",3,"value"],["cLabel","col","cCol","","xs","2","for","state"],["cFormControl","","id","state","readonly","",3,"value"],["cLabel","col","cCol","","xs","2","for","applicant"],["cFormControl","","id","applicant","readonly","",3,"value"],["cLabel","col","cCol","","xs","2","for","worker"],["cFormControl","","id","worker","readonly","",3,"value"],[1,"messages"],["class","mb-3",4,"ngFor","ngForOf"],["cButton","","color","light","class","me-3",3,"click",4,"ngIf"],[4,"ngIf"],["cButton","","color","light","routerLink","/tickets",1,"float-end"],["size","lg","alignment","center",3,"visible",4,"ngIf"],["size","lg","alignment","center",3,"visible"],["cModalTitle",""],["cButtonClose","",3,"click"],["cForm","","ngNativeValidate","",3,"ngSubmit"],["cLabel","col","cCol","","for","newMessageText"],[1,"mb-3","mx-1"],["cFormControl","","id","newMessageText","rows","3","name","newMessageContent","required","",3,"ngModel","ngModelChange"],[1,"mx-1"],["type","submit","cButton","","color","light"],["alignment","center",3,"visible"],["cButton","","color","secondary",3,"click"],["cButton","","color","light",3,"click"],[4,"ngIf","ngIfThen","ngIfElse"],["thenBlock",""],["elseBlock",""],["sm","5"],[1,"float-start","text-start","ps-2"],["cCardTitle","",1,"mb-3"],["cCardText",""],["sm","7"],[1,"float-end","text-end","pe-2",3,"color","textColor"],["cButton","","color","light",1,"me-3",3,"click"],["cLabel","col","cCol","","xs","2","for","statusChange"],["cSelect","","id","statusChange","name","selected.state","required","",1,"mb-3",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],["cLabel","col","cCol","","xs","2","for","categoryChange"],["cSelect","","id","categoryChange","name","selected.category","required","",1,"mb-3",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["cLabel","col","cCol","","xs","2","for","workerChange"],["cSelect","","id","workerChange","name","selected.worker","required","",1,"mb-3",3,"ngModel","ngModelChange"]],template:function(e,o){1&e&&(t.TgZ(0,"c-card",0)(1,"c-card-header"),t._uU(2),t.qZA(),t.TgZ(3,"c-card-body")(4,"form",1)(5,"c-row",2)(6,"label",3),t._uU(7,"\u0422\u0435\u043c\u0430 \u0437\u0430\u044f\u0432\u043a\u0438"),t.qZA(),t.TgZ(8,"c-col"),t._UZ(9,"input",4),t.qZA()(),t.TgZ(10,"c-row",2)(11,"label",5),t._uU(12,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0437\u0430\u044f\u0432\u043a\u0438"),t.qZA(),t.TgZ(13,"c-col"),t._UZ(14,"input",6),t.qZA()(),t.TgZ(15,"c-row",2)(16,"label",7),t._uU(17,"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u044f\u0432\u043a\u0438"),t.qZA(),t.TgZ(18,"c-col"),t._UZ(19,"input",8),t.qZA()(),t.TgZ(20,"c-row",2)(21,"label",9),t._uU(22,"\u0417\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u044c"),t.qZA(),t.TgZ(23,"c-col"),t._UZ(24,"input",10),t.qZA()(),t.TgZ(25,"c-row",2)(26,"label",11),t._uU(27,"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c"),t.qZA(),t.TgZ(28,"c-col"),t._UZ(29,"input",12),t.qZA()(),t.TgZ(30,"c-card")(31,"c-card-header"),t._uU(32," \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f "),t.qZA(),t.TgZ(33,"c-card-body",13),t.YNc(34,b,6,3,"c-row",14),t.qZA()()()(),t.TgZ(35,"c-card-footer")(36,"c-row")(37,"c-col"),t.YNc(38,Z,2,0,"button",15),t.YNc(39,w,4,3,"span",16),t.YNc(40,v,3,2,"span",16),t.YNc(41,E,4,3,"span",16),t.TgZ(42,"button",17),t._uU(43," \u041d\u0430\u0437\u0430\u0434 "),t.qZA()()()()(),t.YNc(44,U,21,2,"c-modal",18),t.YNc(45,S,16,3,"c-modal",18),t.TgZ(46,"c-modal",19)(47,"c-modal-header")(48,"h5",20),t._uU(49,"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"),t.qZA(),t.TgZ(50,"button",21),t.NdJ("click",function(){return o.ToggleModal(2)}),t.qZA()(),t.TgZ(51,"c-modal-body")(52,"form",22),t.NdJ("ngSubmit",function(){return o.AddMessage()}),t.TgZ(53,"c-row")(54,"label",23),t._uU(55,"\u0422\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"),t.qZA()(),t.TgZ(56,"c-row",24)(57,"textarea",25),t.NdJ("ngModelChange",function(s){return o.newMessageContent=s}),t.qZA()(),t.TgZ(58,"c-row",26)(59,"button",27),t._uU(60,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),t.qZA()()()()(),t.YNc(61,Y,17,4,"c-modal",18),t.TgZ(62,"c-modal",28)(63,"c-modal-header")(64,"h5",20),t._uU(65),t.qZA(),t.TgZ(66,"button",21),t.NdJ("click",function(){return o.ToggleModal(4)}),t.qZA()(),t.TgZ(67,"c-modal-body"),t._uU(68," \u041e\u0442\u043c\u0435\u043d\u0430 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0431\u0443\u0434\u0435\u0442 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430. \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b? "),t.qZA(),t.TgZ(69,"c-modal-footer")(70,"button",29),t.NdJ("click",function(){return o.ToggleModal(4)}),t._uU(71," \u041d\u0435\u0442 "),t.qZA(),t.TgZ(72,"button",30),t.NdJ("click",function(){return o.confirm.method()}),t._uU(73,"\u0414\u0430"),t.qZA()()()),2&e&&(t.xp6(2),t.hij("\u0417\u0430\u044f\u0432\u043a\u0430 \u2116",o.ticket.id,""),t.xp6(7),t.Q6J("value",o.ticket.theme),t.xp6(5),t.Q6J("value",null==o.ticket.category?null:o.ticket.category.name),t.xp6(5),t.Q6J("value",o.GetStateName()),t.xp6(5),t.Q6J("value",(null==o.ticket.applicant?null:o.ticket.applicant.secondName)+" "+(null==o.ticket.applicant?null:o.ticket.applicant.firstName)),t.xp6(5),t.Q6J("value",null!=o.ticket.worker?(null==o.ticket.worker?null:o.ticket.worker.secondName)+" "+(null==o.ticket.worker?null:o.ticket.worker.firstName):""),t.xp6(5),t.Q6J("ngForOf",o.ticket.messages),t.xp6(4),t.Q6J("ngIf",!(4==o.ticket.states[0].state||3==o.ticket.states[0].state||2==o.user.role&&o.ticket.workerId!=o.user.userId||3==o.user.role&&o.ticket.applicantId!=o.user.userId)),t.xp6(1),t.Q6J("ngIf",1==o.user.role),t.xp6(1),t.Q6J("ngIf",2==o.user.role),t.xp6(1),t.Q6J("ngIf",3==o.user.role),t.xp6(3),t.Q6J("ngIf",1==o.user.role),t.xp6(1),t.Q6J("ngIf",1==o.user.role),t.xp6(1),t.Q6J("visible",o.modal[2]),t.xp6(11),t.Q6J("ngModel",o.newMessageContent),t.xp6(4),t.Q6J("ngIf",1==o.user.role),t.xp6(1),t.Q6J("visible",o.modal[4]),t.xp6(3),t.Oqu(o.confirm.name))},directives:[n.AkF,n.nkx,n.yue,l._Y,l.JL,l.F,n.$_X,n.iok,n.eFW,n.sOC,n.Yp0,n.oHf,a.sg,a.O5,n.qkm,n.PVT,n.xUh,n.Hq3,_.rH,n.zS7,n.Rbl,n.vPP,n.PFQ,n.KF4,n.nqR,l.EJ,l.Q7,l.JJ,l.On,l.YN,l.Kr,l.Fj,n.YI7],pipes:[a.uU],styles:[".messages[_ngcontent-%COMP%]{max-height:75vh;overflow-y:auto}.messages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:15px}"]}),u})(),data:{title:$localize`Заявка`}},{path:"",redirectTo:"/tickets/1",pathMatch:"full"}];let B=(()=>{class u{}return u.\u0275fac=function(e){return new(e||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[[_.Bz.forChild(D)],_.Bz]}),u})(),H=(()=>{class u{}return u.\u0275fac=function(e){return new(e||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[[B,n.dTQ,n.dGk,d.QX,n.P4_,a.ez,n.zE6,n.qek,l.UX,n.hJ1,n.ejP,n.hJ1,n.ga2,p.N,n.FxY,n.U$I,n.u3b,a.ez,n.zkK,l.u5]]}),u})()}}]);